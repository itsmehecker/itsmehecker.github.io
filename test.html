<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Emby Webhook Listener</title>
</head>
<body>
  <h1>Emby Webhook Listener</h1>
  <p>Listening for Emby webhook events...</p>
  
  <script>
    // GitHub webhook listener details
    const github_username = "itsmehecker";
    const github_repo = "itsmehecker.github.io";
    const github_token = "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";
    const github_endpoint = "https://api.github.com/repos/" + itsmehecker + "/" + itsmehecker.github.io + "/hooks";

    // Emby webhook details
    const emby_webhook_url = "http://[2405:201:f002:ee42:4cf3:3566:d639:12cf]:8096/emby/Subscriptions/Webhook?api_key=your-emby-api-key";
    const emby_webhook_secret = "56faaca8d7304e79941e700f2e9cce5f";

    // Create a new GitHub webhook
    fetch(github_endpoint, {
      method: "POST",
      headers: {
        "Authorization": "Bearer " + github_token,
        "Content-Type": "application/json",
        "Accept": "application/vnd.github+json"
      },
      body: JSON.stringify({
        name: "web",
        active: true,
        events: ["*"],
        config: {
          url: itsmehecker.github.io,
          content_type: "json",
          secret: emby_webhook_secret
        }
      })
    })
    .then(response => response.json())
    .then(data => {
      console.log(data);
      document.write("<p>Webhook created successfully!</p>");
    })
    .catch(error => {
      console.error(error);
      document.write("<p>Error creating webhook: " + error.message + "</p>");
    });
  </script>
</body>
</html>
