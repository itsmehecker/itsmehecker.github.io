<!DOCTYPE html>
<html>
<head>
  <title>Chat Application</title>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
  <div id="chat-container">
    <div id="message-display"></div>
    <div id="input-container">
      <input type="text" id="message-input" placeholder="Type your message...">
      <button id="send-button">Send</button>
    </div>
  </div>

  <script>
    // WebSocket connection
    const socket = new WebSocket("ws://" + window.location.host);

    // Get DOM elements
    const messageDisplay = document.getElementById("message-display");
    const messageInput = document.getElementById("message-input");
    const sendButton = document.getElementById("send-button");

    // Event listener for WebSocket connection open
    socket.addEventListener("open", (event) => {
      console.log("WebSocket connection established.");
    });

    // Event listener for WebSocket messages
    socket.addEventListener("message", (event) => {
      const message = event.data;
      displayMessage(message, "incoming");
      scrollToBottom();
    });

    // Event listener for sending messages
    sendButton.addEventListener("click", () => {
      const message = messageInput.value;
      if (message) {
        socket.send(message);
        displayMessage(message, "outgoing");
        messageInput.value = "";
        scrollToBottom();
      }
    });

    // Function to display a message in the chat
    function displayMessage(message, type) {
      const messageElement = document.createElement("div");
      messageElement.classList.add("message", type);
      messageElement.innerText = message;
      messageDisplay.appendChild(messageElement);
    }

    // Function to scroll to the bottom of the message display
    function scrollToBottom() {
      messageDisplay.scrollTop = messageDisplay.scrollHeight;
    }
  </script>
</body>
</html>
